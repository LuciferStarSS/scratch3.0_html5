<html>
<!--[if lt IE 9 ]> <html class="ie8"> <![endif]-->
<!--[if IE 9 ]> <html class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html> <!--<![endif]-->
    <head>
        <meta charset="UTF-8" />

        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Prevent mobile Safari from making phone numbers -->
        <meta name="format-detection" content="telephone=no">

        

        <!-- Favicon & CSS normalize -->
        <link rel="stylesheet" href="./css/lib/normalize.min.css" />

        <!-- Polyfills -->
        <script src="./js/polyfill.min.js"></script>
<script>
var oScratch=null;//="test";
var strScratchFile=null;
var oVM=null;
var oGUI=null;

document.cookie = "scratchlanguage=zh-cn";//localhost状态下，此设置无效，语言还得手动调。
</script>

<style>
  #container {
    visibility:hidden;
    border: 1px solid #aaa;
    position: absolute;
    left: 0px;
    top: 0px;
    width:99%;
    height:99%;
    z-index: 9999;
  }
  .box
  {
    font-size:80px;
    color:red;
    line-height: 100px;
    text-align: center;
    position: absolute;
    top: 50%;
    margin-top: -50px;
    display: -moz-box;
    -moz-box-pack: center;
    -moz-box-align: center;
    width: 100%;
}
</style>
    </head>

    <body>
        <noscript>
            <p>IE内核浏览器已经不能支持本程序需要的HTML5了，请使用Chrome内核的浏览器。</p>
        </noscript>
正在加载，请稍候。<p>
等程序加载完毕后，若将Scratch项目文件拖曳到本窗口，可直接打开该文件。

        <div id="container" style="position:absolute;visibility:hidden;z-index:99999;"><div class=box>您可通过拖曳Scratch项目文件到此处来实现文件的打开操作。</div></div>
        <div id="app"></div>


<script>
    /*拖拽的目标对象------ document 监听drop 并防止浏览器打开客户端的图片*/
    document.ondragover = function (e) {
        e.preventDefault();  //只有在ondragover中阻止默认行为才能触发 ondrop 而不是 ondragleave
        document.getElementById("container").style.visibility="visible";
    };

    document.ondrop = function (e) {
        e.preventDefault();  //阻止 document.ondrop的默认行为  *** 在新窗口中打开拖进的图片
        document.getElementById("container").style.visibility="hidden";

    };
    /*拖拽的源对象----- 客户端的一张图片 */
    /*拖拽目标对象-----div#container  若图片释放在此元素上方，则需要在其中显示*/
    container.ondragover = function (e) {
        e.preventDefault();
        document.getElementById("container").style.visibility="hidden";
    };

    container.ondragleave = function (e) {
        e.preventDefault();
        document.getElementById("container").style.visibility="hidden";
    };

    container.ondrop = function (e) {
        var list = e.dataTransfer.files;
        for (var i = 0; i < list.length; i++) {
            var f = list[i];
            reader(f);
        }
    };

    function reader(f) {
        var reader = new FileReader();
        reader.readAsArrayBuffer(f);//readAsDataURL(f);
        reader.onload = function () {
           oGUI.props.vm.loadProject(reader.result);
           document.getElementById("container").style.visibility="hidden";
        }
    } 

</script>

        <!-- Vendor & Initialize (Session & Localization)-->
        <script src="./js/common.bundle.js"></script>

        <!-- Scripts -->
        <script src="./js/projects.intl.js"></script>
        <script src="./js/projects.bundle.js"></script>

        <!-- Translate title element -->
        
    </body>
</html>
